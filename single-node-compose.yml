version: '3'

services:
  spot-follow:
    build:
      dockerfile: Dockerfile
      context: ./spot-follow
    environment: #environment variable to be set on host machine specific to each spot
      - SPOT_ACCOUNT=${SPOT_ACCOUNT}
      - SPOT_PASSWORD=${SPOT_PASSWORD}
      - SPOT_IP=${SPOT_IP}
    stdin_open: true # docker run -i
    tty: true # docker run -t
  datadog:
    build: datadog
    links:
     - spot-follow # connect to spot-follow
    environment:
     - DD_API_KEY=${DD_API_KEY}
     - DD_SITE="datadoghq.com"
    volumes:
     - /var/run/docker.sock:/var/run/docker.sock
     - /proc/:/host/proc/:ro
     - /sys/fs/cgroup:/host/sys/fs/cgroup:ro